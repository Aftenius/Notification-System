# Система уведомлений

Этот Python-скрипт реализует гибкую систему уведомлений, которая позволяет отправлять различные типы уведомлений (Push, Email, Messenger) в зависимости от настроек пользователей и типов событий. Система разработана с использованием объектно-ориентированных принципов, включая шаблон проектирования "Фабрика" и интерфейсы, определенные через `abc` (Абстрактные базовые классы).

## Возможности

- **Поддержка нескольких типов уведомлений**: Система поддерживает три типа уведомлений: Push, Email и Messenger.
- **Настройки пользователей**: Каждый пользователь имеет индивидуальные настройки уведомлений, которые определяют, о каких событиях он хочет быть уведомлен и через какие каналы (Email или Messenger).
- **Push уведомления всегда включены**: Push-уведомления отправляются всегда, независимо от настроек пользователя. (можно изменить)
- **Паттерн "Фабрика" для создания уведомлений**: Уведомления создаются динамически в зависимости от типа с помощью фабрики.
- **Эффективность**: Скрипт включает измерение времени выполнения для отслеживания производительности процесса отправки уведомлений.

## Структура проекта

Скрипт состоит из следующих компонентов:

1. **Интерфейс уведомлений**: Абстрактный базовый класс `Notification`, который определяет метод `send`. Это гарантирует, что все типы уведомлений (Push, Email, Messenger) реализуют единый интерфейс для отправки уведомлений.
    ```python
    class Notification(ABC):
        @abstractmethod
        def send(self, user, event_type):
            pass
    ```

2. **Классы PushNotification, EmailNotification и MessengerNotification**: Каждый из этих классов наследует `Notification` и предоставляет конкретную реализацию метода `send` для разных типов уведомлений.

    Пример:
    ```python
    class PushNotification(Notification):
        def send(self, user, event_type):
            print(f"Отправлено Push уведомление пользователю {user} о событии {event_type}")
    ```

3. **NotificationFactory**: Класс фабрики, который динамически создает объекты уведомлений на основе типа уведомления. Это позволяет системе легко масштабироваться и добавлять новые типы уведомлений без изменения существующего кода.
    ```python
    class NotificationFactory:
        def get_notification(self, notification_type):
            # Возвращает класс уведомления в зависимости от типа
    ```

4. **Функция send_notifications**: Основная функция, которая отправляет уведомления пользователям на основе их настроек. Она выполняет следующие действия:
    - Всегда отправляет Push уведомления.
    - Проверяет пользовательские настройки для Email и Messenger уведомлений в зависимости от указанного типа события.
    - Использует `NotificationFactory` для создания и отправки уведомлений нужного типа.

    ```python
    def send_notifications(user_settings_list, event_type):
        # Логика отправки уведомлений в зависимости от настроек пользователей
    ```

5. **Настройки пользователей**: Словарь, который определяет предпочтения пользователей, включая их имя, включенные каналы уведомлений и предпочтения для конкретных событий (например, новые задачи, успешные задачи, свободная рука).

    Пример:
    ```python
    users_settings_notifications = {
        1: {
            "first_name":"Bob",
            "email": True,
            "messenger": False,
            "new_task": True,
            "successful_task": False,
            "free_hand": True,
        }
    }
    ```

6. **Измерение производительности**: Скрипт измеряет время, затраченное на отправку уведомлений всем пользователям для заданного события, что позволяет оценить эффективность выполнения.

    ```python
    start_time = time.time()
    send_notifications(users_settings_notifications, "successful_task")
    end_time = time.time()
    print(f"Time taken: {end_time - start_time:.4f} seconds")
    ```

## Пример использования

Скрипт предназначен для обработки различных типов событий (например, `new_task`, `successful_task`, `free_hand`). Вы можете настроить настройки пользователей и типы событий в соответствии с вашими потребностями.

### Пример потока уведомлений:

- **Событие**: `"successful_task"`
- **Настройки пользователей**: 
    - Боб хочет получать Email уведомления для события `successful_task`, но не через Messenger.
    - Том не хочет получать уведомления для этого события.
    - Ламберт и Вонг настроили уведомления для разных комбинаций каналов.

Система выполнит следующие действия:
- Отправит Push уведомления всем пользователям.
- Отправит Email уведомления только тем, кто включил их для данного события.
- Пропустит уведомления в Messenger для тех, кто их отключил.

## Запуск кода

Для запуска скрипта выполните его с помощью Python:

```bash
py -m venv venv
source venv/Script/activate
python main.py
